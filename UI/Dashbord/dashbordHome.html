<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dasboard</title>
    <link rel="stylesheet" href="General.css">
    <link rel="stylesheet" href="dashbordHome.css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="leftSide">
        <div class="image"><img class="icon" src="dImage/Ellipse 5.svg" alt=""></div>
        <div class="wordP">
            <div>Gisa M. Caleb</div>
            <div class="wordD">Admin</div>
        </div>
        <div class="image"><a href="dashbordProfile.html">
            <img class="icon" src="dImage/healthicons_ui-user-profile.svg" alt="">
        </a></div>
        <div class="word"><a href="dashbordProfile.html">Profile</a></div>
        <div class="image"><a href="dashbordMassage.html">
            <img class="icon" src="dImage/Vector.svg" alt=""></a></div>
        <div class="word"><a href="dashbordMassage.html">Messages</a></div>
        <button class="logout-btn logIcon">
            <img class="icon" src="dImage/uiw_logout.svg" alt="">
        </button>
        <button class="logout-btn logWord">Logout</button>
        

    </div>
    <div class="rightSide">
        <div style="display: flex; gap: 0px;">
            <div class="top">
                <a class="activeOne" href="dashbordHome.html">Home</a>
                <a href="dashbordPort.html">Portfolio</a>
                <a href="dashbordBlog.html">Blog</a>
            </div>
            <button class="hamburger-btn" id="hamburgerBtn">&#9776;</button>
            </div>
    
            <div class="mobile-navbar" id="mobileNavbar">
                <button class="close-btn" id="closeBtn">&times;</button>
                <div class="mobile-navbar-links">
                    <a class="activeOne" href="dashbordHome.html">Home</a>
                    <a href="dashbordPort.html">Portfolio</a>
                    <a href="dashbordBlog.html">Blog</a>
                </div>
              </div>

        <div class="home">
            <div class="column1 js-all-skills">Total Skills : 6</div>
            <div class="column2 js-all-proj">Total Progects : 10</div>
            <div class="column1 js-all-blog">
                <p>Total blogs : </p> <div id="numOfBlogs"></div>
            </div>
            <div class="column2 js-all-proj">
                <p>Total Messages : </p> <div id="numOfMess"></div>
            </div>
            <div class="column1 js-all-blog">
                <p>Total Likes : </p> <div id="numOfLikes"></div>
            </div>
        </div>

    </div>

    
    <script src="dashbordHome.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="../General/JS.js"></script>
    <script src="dashbordBlog.js"></script>
    <script src="dashbord.js"></script>
    <script>

let totalBlogs = 0;
let totalLikes = 0;

document.addEventListener("DOMContentLoaded", function () {
    let numLikeDiv = document.getElementById('numOfLikes');
    
    async function updateBlogDisplay() {
        try {
            showLoader();
            const response = await fetch("https://my-brand-backend-iyxk.onrender.com/api/blogs", {
                method: "GET",
            });
            const data = await response.json();
            hideLoader();
            let allBlogs = data;
    
            let totalBlogs = allBlogs.length;
            localStorage.setItem('totalBlogs', totalBlogs);
    
            let totalLikes = 0;
            allBlogs.forEach((blog) => {
                totalLikes += blog.bNumOfLike;
            });
    
            if (numLikeDiv) {
                numLikeDiv.innerHTML = totalLikes;
            }
    
        } catch (error) {
            console.log('Error:', error);
        }
    }

    updateBlogDisplay();
});


        const totalB = localStorage.getItem('totalBlogs');
    document.getElementById('numOfBlogs').innerHTML = totalB;

    const totalM = localStorage.getItem('totalMessages');
    document.getElementById('numOfMess').innerHTML = totalM;
    </script>
    <script src="newBlog.js"></script>
</body>
</html>